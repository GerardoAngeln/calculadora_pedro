<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema de Cobranza en Ruta</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',sans-serif;}
body{display:flex;height:100vh;background:#f5f6fa;color:#333;flex-direction:row;}
.sidebar{width:240px;background:#fff;box-shadow:2px 0 10px rgba(0,0,0,0.08);display:flex;flex-direction:column;justify-content:space-between;padding:20px 0;}
.sidebar h2{text-align:center;font-size:1.4em;color:#444;margin-bottom:20px;}
.menu{display:flex;flex-direction:column;}
.menu button{background:none;border:none;padding:14px 20px;text-align:left;font-size:1em;cursor:pointer;transition:0.3s;color:#333;}
.menu button:hover, .menu button.active{background:#e8f0fe;color:#1a73e8;}
.menu button i{margin-right:10px;}
.main-content{flex:1;padding:30px;overflow-y:auto;}
.module{display:none;animation:fadeIn 0.3s ease-in-out;}
.module.active{display:block;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
header{background:#fff;padding:15px 25px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.1);margin-bottom:25px;display:flex;justify-content:space-between;align-items:center;}
header h1{font-size:1.3em;color:#1a73e8;}
footer{text-align:center;font-size:0.9em;padding:10px;color:#888;}
/* Formularios */
.ventas-form,.clientes-form,.ruta-form{max-width:600px;margin:0 auto;display:flex;flex-direction:column;gap:10px;}
.ventas-form input,.ventas-form select,.ventas-form textarea,
.clientes-form input,.clientes-form select,.clientes-form textarea,
.ruta-form input,.ruta-form select,.ruta-form textarea{padding:8px;border:1px solid #ccc;border-radius:5px;width:100%;}
.ventas-form label,.clientes-form label,.ruta-form label{font-weight:bold;}
.ventas-form button,.clientes-form button,.ruta-form button{background:#1a73e8;color:#fff;padding:10px;border:none;border-radius:5px;cursor:pointer;transition:0.3s;}
.ventas-form button:hover,.clientes-form button:hover,.ruta-form button:hover{background:#155ab6;}
#folioActual{font-weight:bold;text-align:center;margin-bottom:10px;}
.ticket-preview{margin-top:15px;padding:10px;border:1px dashed #aaa;border-radius:5px;}
/* Responsive */
@media(max-width:768px){body{flex-direction:column}.sidebar{width:100%;display:flex;flex-direction:row;overflow-x:auto}.menu button{text-align:center;flex:1;}}
</style>
</head>
<body>

<div class="sidebar">
  <div>
    <h2>💼 Cobranza Ruta</h2>
    <div class="menu">
      <button id="btnRuta" class="active"><i>🧭</i>Ruta</button>
      <button id="btnVentas"><i>💰</i>Ventas</button>
      <button id="btnClientes"><i>👤</i>Clientes</button>
      <button id="btnConfig"><i>⚙️</i>Configuración</button>
      <button id="btnReportes"><i>📊</i>Reportes</button>
    </div>
  </div>
  <footer>© 2025 Sistema de Cobranza</footer>
</div>

<div class="main-content">
  <header>
    <h1 id="tituloModulo">Módulo: Ruta</h1>
    <div id="relojFecha"></div>
  </header>

  <!-- Módulo Ruta -->
  <section id="modRuta" class="module active">
    <h2>Ruta del día</h2>
    <form class="ruta-form">
      <label>Seleccionar cobrador</label>
      <select id="cobradorRuta"><option value="">Selecciona cobrador</option></select>
      <div id="clientesRuta"></div>
    </form>
  </section>

  <!-- Módulo Ventas -->
  <section id="modVentas" class="module">
    <h2>Registro de Ventas</h2>
    <div id="folioActual"></div>
    <form class="ventas-form">
      <label>Asignar cobrador</label><select id="cobradorVenta"><option value="">Selecciona cobrador</option></select>
      <label>Fecha de venta</label><input type="date" id="fechaVenta">
      <label>Artículos</label><input type="text" id="articulos">
      <label>Lugar de entrega</label><input type="text" id="lugarEntrega">
      <label>Precio</label><input type="number" id="precio">
      <label>Nombre</label><input type="text" id="nombreCliente">
      <label>Domicilio particular</label><input type="text" id="domicilioParticular">
      <label>Domicilio de empleo</label><input type="text" id="domicilioTrabajo">
      <label>Pago semanal</label><input type="number" id="pagoSemanal">
      <label>Pago quincenal</label><input type="number" id="pagoQuincenal">
      <label>Horario</label><input type="text" id="horario">
      <label>Lugar de cobro</label><input type="text" id="lugarCobro">
      <label>Enganche</label><input type="number" id="enganche">
      <label>Método de pago</label><input type="text" id="metodoPago">
      <label>Cobro o transferencia</label><input type="text" id="tipoCobro">
      <label>Observaciones</label><textarea id="observaciones"></textarea>
      <button type="button" id="aplicarVenta">Aplicar venta</button>
      <button type="button" id="imprimirTicket">Imprimir ticket</button>
    </form>
  </section>

  <!-- Módulo Clientes -->
  <section id="modClientes" class="module">
    <h2>Clientes</h2>
    <form class="clientes-form">
      <label>Nombre</label><input type="text" id="nombreCli">
      <label>Teléfono</label><input type="text" id="telefonoCli">
      <button type="button" id="guardarCliente">Guardar cliente</button>
    </form>
    <button id="asignarUbicacion">Asignar ubicación actual</button>
    <button id="verUbicacion">Ver ubicación del cliente</button>
    <div id="listaClientes"></div>
  </section>

  <!-- Módulo Configuración -->
  <section id="modConfig" class="module">
    <h2>Configuración</h2>
    <p>Administración de cobradores, clientes y asignaciones.</p>
  </section>

  <!-- Módulo Reportes -->
  <section id="modReportes" class="module">
    <h2>Reportes</h2>
    <p>Filtra por cliente, cobrador y rango de fechas.</p>
  </section>

</div>

<script>
// Módulos
const botones={btnRuta:'modRuta',btnVentas:'modVentas',btnClientes:'modClientes',btnConfig:'modConfig',btnReportes:'modReportes'};
const titulo=document.getElementById('tituloModulo');
Object.keys(botones).forEach(id=>{
  document.getElementById(id).addEventListener('click',()=>{
    Object.keys(botones).forEach(btn=>{
      document.getElementById(btn).classList.remove('active');
      document.getElementById(botones[btn]).classList.remove('active');
    });
    document.getElementById(id).classList.add('active');
    document.getElementById(botones[id]).classList.add('active');
    titulo.textContent='Módulo: '+document.getElementById(id).textContent.trim();
  });
});

// Reloj
function actualizarReloj(){const now=new Date();document.getElementById('relojFecha').textContent=now.toLocaleDateString()+' '+now.toLocaleTimeString();}
setInterval(actualizarReloj,1000);
actualizarReloj();

// Clientes
let clientes=JSON.parse(localStorage.getItem('clientes'))||[];
function actualizarListaClientes(){
  const lista=document.getElementById('listaClientes');lista.innerHTML='';
  clientes.forEach((c,i)=>{
    const div=document.createElement('div');
    div.textContent=`${c.nombre} - ${c.telefono}`;
    lista.appendChild(div);
  });
}
document.getElementById('guardarCliente').addEventListener('click',()=>{
  const nombre=document.getElementById('nombreCli').value;
  const telefono=document.getElementById('telefonoCli').value;
  if(!nombre){alert('Escribe el nombre');return;}
  clientes.push({nombre,telefono});
  localStorage.setItem('clientes',JSON.stringify(clientes));
  actualizarListaClientes();
  document.getElementById('nombreCli').value='';
  document.getElementById('telefonoCli').value='';
});

// Ventas
let ventas=JSON.parse(localStorage.getItem('ventas'))||[];
let folio=parseInt(localStorage.getItem('folioVenta'))||1;
document.getElementById('folioActual').textContent='Folio actual: #'+folio.toString().padStart(5,'0');
document.getElementById('aplicarVenta').addEventListener('click',()=>{
  const v={
    cobrador:document.getElementById('cobradorVenta').value,
    fecha:document.getElementById('fechaVenta').value,
    articulos:document.getElementById('articulos').value,
    lugarEntrega:document.getElementById('lugarEntrega').value,
    precio:document.getElementById('precio').value,
    nombre:document.getElementById('nombreCliente').value,
    domicilioParticular:document.getElementById('domicilioParticular').value,
    domicilioTrabajo:document.getElementById('domicilioTrabajo').value,
    pagoSemanal:document.getElementById('pagoSemanal').value,
    pagoQuincenal:document.getElementById('pagoQuincenal').value,
    horario:document.getElementById('horario').value,
    lugarCobro:document.getElementById('lugarCobro').value,
    enganche:document.getElementById('enganche').value,
    metodoPago:document.getElementById('metodoPago').value,
    tipoCobro:document.getElementById('tipoCobro').value,
    observaciones:document.getElementById('observaciones').value
  };
  ventas.push(v);
  localStorage.setItem('ventas',JSON.stringify(ventas));
  localStorage.setItem('folioVenta',folio+1);
  folio++;
  document.getElementById('folioActual').textContent='Folio actual: #'+folio.toString().padStart(5,'0');
  alert('Venta registrada correctamente');
});

// Imprimir ticket
document.getElementById('imprimirTicket').addEventListener('click',()=>{
  if(ventas.length===0){alert('No hay ventas registradas');return;}
  const v=ventas[ventas.length-1];
  const fechaActual=new Date();
  const fechaImpresion=fechaActual.toLocaleDateString();
  const horaImpresion=fechaActual.toLocaleTimeString();
  const ticket=`
    <div style="font-family:Segoe UI, sans-serif;padding:20px;width:300px;">
      <h2 style="text-align:center;font-weight:bold;margin-bottom:5px;">Promociones Culturales de México</h2>
      <hr style="margin:10px 0;">
      <p><strong>Folio:</strong> #${(folio-1).toString().padStart(5,'0')}</p>
      <p><strong>Fecha de venta:</strong> ${v.fecha}</p>
      <p><strong>Fecha impresión:</strong> ${fechaImpresion}</p>
      <p><strong>Hora impresión:</strong> ${horaImpresion}</p>
      <hr style="margin:10px 0;">
      <p><strong>Cliente:</strong> ${v.nombre}</p>
      <p><strong>Artículos:</strong> ${v.articulos}</p>
      <p><strong>Lugar de entrega:</strong> ${v.lugarEntrega}</p>
      <p><strong>Precio total:</strong> $${v.precio}</p>
      <p><strong>Enganche:</strong> $${v.enganche}</p>
      <p><strong>Método de pago:</strong> ${v.metodoPago}</p>
      <p><strong>Cobro o transferencia:</strong> ${v.tipoCobro}</p>
      <p><strong>Cobrador:</strong> ${v.cobrador}</p>
      <p><strong>Pago semanal:</strong> ${v.pagoSemanal? '$'+v.pagoSemanal : '-'}</p>
      <p><strong>Pago quincenal:</strong> ${v.pagoQuincenal? '$'+v.pagoQuincenal : '-'}</p>
      <p><strong>Horario:</strong> ${v.horario}</p>
      <p><strong>Lugar de cobro:</strong> ${v.lugarCobro}</p>
      <p><strong>Observaciones:</strong> ${v.observaciones|| '-'}</p>
      <hr style="margin:10px 0;">
      <p style="text-align:center;font-size:0.9em;">Gracias por su compra</p>
      <p style="text-align:center;font-size:0.8em;">Este ticket es comprobante de venta</p>
    </div>`;
  const w=window.open('','', 'width=400,height=600');
  w.document.write(ticket);
  w.document.close();
  w.print();
});
</script>
</body>
</html>

