<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistema de Cobranza en Ruta</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',sans-serif;}
    body{display:flex;height:100vh;background:#f5f6fa;color:#333;flex-direction:column;}
    .container{display:flex;flex:1;overflow:hidden;}
    .sidebar{width:240px;background:#fff;box-shadow:2px 0 10px rgba(0,0,0,0.08);display:flex;flex-direction:column;justify-content:space-between;padding:20px 0;flex-shrink:0;}
    .sidebar h2{text-align:center;font-size:1.4em;color:#444;margin-bottom:20px;}
    .menu{display:flex;flex-direction:column;}
    .menu button{background:none;border:none;padding:14px 20px;text-align:left;font-size:1em;cursor:pointer;transition:0.3s;color:#333;}
    .menu button:hover,.menu button.active{background:#e8f0fe;color:#1a73e8;}
    .menu button i{margin-right:10px;}
    .main-content{flex:1;padding:20px;overflow-y:auto;}
    .module{display:none;animation:fadeIn 0.3s ease-in-out;}
    .module.active{display:block;}
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
    header{background:#fff;padding:10px 20px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.1);margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;}
    header h1{font-size:1.3em;color:#1a73e8;margin-bottom:5px;}
    #fechaHora{font-size:0.95em;color:#555;}
    footer{text-align:center;font-size:0.9em;padding:10px;color:#888;}
    form div{margin-bottom:10px;}
    input,select,textarea,button{padding:8px;margin-right:5px;border-radius:4px;border:1px solid #ccc;font-size:0.95em;}
    textarea{width:100%;resize:none;}
    button.btnCliente{margin-left:5px;cursor:pointer;background:#1a73e8;color:#fff;border:none;padding:4px 6px;border-radius:4px;font-size:0.85em;}
    ul{list-style:none;margin-top:10px;padding-left:0;max-height:300px;overflow-y:auto;}
    li{padding:6px 4px;border-bottom:1px solid #eee;}
    .form-card{background:#fff;padding:20px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.1);max-width:700px;margin:auto;}
    @media(max-width:768px){.container{flex-direction:column;}.sidebar{width:100%;display:flex;flex-direction:row;overflow-x:auto;}.menu button{text-align:center;padding:10px;}}
  </style>
</head>
<body>

<div class="container">
  <!-- Panel lateral -->
  <div class="sidebar">
    <div>
      <h2>üíº Cobranza Ruta</h2>
      <div class="menu">
        <button id="btnRuta" class="active"><i>üß≠</i>Ruta</button>
        <button id="btnVentas"><i>üí∞</i>Ventas</button>
        <button id="btnClientes"><i>üë§</i>Clientes</button>
        <button id="btnConfig"><i>‚öôÔ∏è</i>Configuraci√≥n</button>
        <button id="btnReportes"><i>üìä</i>Reportes</button>
      </div>
    </div>
    <footer>¬© 2025 Sistema de Cobranza</footer>
  </div>

  <!-- Contenido principal -->
  <div class="main-content">
    <header>
      <h1 id="tituloModulo">M√≥dulo: Ruta</h1>
      <div id="fechaHora"></div>
    </header>

    <!-- M√≥dulo de Ruta -->
    <section id="modRuta" class="module active">
      <h2>Ruta del d√≠a</h2>
      <p>Aqu√≠ se mostrar√°n los clientes asignados al cobrador y sus pagos pendientes.</p>
    </section>

    <!-- üîπ NUEVO M√ìDULO DE VENTAS -->
    <section id="modVentas" class="module">
      <h2>Registro de Venta</h2>
      <div class="form-card">
        <form id="formVentaNuevo">
          <div><label>Fecha de venta:</label><input type="date" id="fechaVenta" required></div>
          <div><label>Art√≠culos:</label><input type="text" id="articulos" required></div>
          <div><label>Lugar de entrega:</label><input type="text" id="lugarEntrega" required></div>
          <div><label>Precio:</label><input type="number" id="precio" required></div>
          <div><label>Nombre:</label><input type="text" id="nombre" required></div>
          <div><label>Domicilio particular:</label><input type="text" id="domParticular"></div>
          <div><label>Domicilio de empleo:</label><input type="text" id="domEmpleo"></div>
          <div>
            <label>Pago semanal:</label><input type="number" id="pagoSemanal" placeholder="$">
            <label>Pago quincenal:</label><input type="number" id="pagoQuincenal" placeholder="$">
          </div>
          <div><label>Horario:</label><input type="text" id="horario" placeholder="Ej. 9:00 - 18:00"></div>
          <div><label>Lugar de cobro:</label><input type="text" id="lugarCobro"></div>
          <div><label>Enganche:</label><input type="number" id="enganche"></div>
          <div>
            <label>M√©todo de pago:</label>
            <select id="metodoPago">
              <option value="">-- Selecciona --</option>
              <option>Efectivo</option>
              <option>Tarjeta</option>
              <option>Transferencia</option>
            </select>
          </div>
          <div>
            <label>Cobro o transferencia:</label>
            <select id="tipoCobro">
              <option value="">-- Selecciona --</option>
              <option>Cobro</option>
              <option>Transferencia</option>
            </select>
          </div>
          <div><label>Observaciones:</label><textarea id="observaciones" rows="3"></textarea></div>
          <div>
            <label>Asignar cobrador:</label>
            <select id="cobradorVenta" required>
              <option value="">-- Selecciona --</option>
              <option value="Cobrador 1">Cobrador 1</option>
              <option value="Cobrador 2">Cobrador 2</option>
              <option value="Cobrador 3">Cobrador 3</option>
            </select>
          </div>
          <div style="text-align:center;margin-top:15px;">
            <button type="submit">Aplicar Venta</button>
            <button type="button" id="imprimirTicketNuevo">Imprimir Ticket</button>
          </div>
        </form>
      </div>
      <ul id="ventasUl"></ul>
    </section>

    <!-- M√≥dulo Clientes -->
    <section id="modClientes" class="module">
      <h2>Clientes</h2>
      <p>Aqu√≠ podr√°s gestionar los clientes del sistema.</p>
    </section>

    <!-- M√≥dulo Configuraci√≥n -->
    <section id="modConfig" class="module">
      <h2>Configuraci√≥n</h2>
      <p>Administraci√≥n de cobradores, clientes y asignaciones.</p>
    </section>

    <!-- M√≥dulo Reportes -->
    <section id="modReportes" class="module">
      <h2>Reportes</h2>
      <p>Visualiza los reportes de ventas, cobranza y desempe√±o general.</p>
    </section>
  </div>
</div>

<script>
  // üß≠ Navegaci√≥n de m√≥dulos
  const botones={btnRuta:'modRuta',btnVentas:'modVentas',btnClientes:'modClientes',btnConfig:'modConfig',btnReportes:'modReportes'};
  const titulo=document.getElementById('tituloModulo');
  Object.keys(botones).forEach(id=>{
    document.getElementById(id).addEventListener('click',()=>{
      Object.keys(botones).forEach(btn=>{
        document.getElementById(btn).classList.remove('active');
        document.getElementById(botones[btn]).classList.remove('active');
      });
      document.getElementById(id).classList.add('active');
      document.getElementById(botones[id]).classList.add('active');
      titulo.textContent='M√≥dulo: '+document.getElementById(id).textContent.trim();
    });
  });

  // üïí Fecha y hora en tiempo real
  const fechaHora=document.getElementById('fechaHora');
  function actualizarHora(){
    const ahora=new Date();
    const fecha=ahora.toLocaleDateString();
    const hora=ahora.toLocaleTimeString();
    fechaHora.textContent=`${fecha} ${hora}`;
  }
  setInterval(actualizarHora,1000);

  // üßæ Nuevo m√≥dulo de ventas
  const formVentaNuevo=document.getElementById('formVentaNuevo');
  const ventasUl=document.getElementById('ventasUl');
  const imprimirTicket=document.getElementById('imprimirTicketNuevo');
  let ventas=[];

  formVentaNuevo.addEventListener('submit',e=>{
    e.preventDefault();
    const venta={
      fecha:document.getElementById('fechaVenta').value,
      articulos:document.getElementById('articulos').value,
      lugarEntrega:document.getElementById('lugarEntrega').value,
      precio:document.getElementById('precio').value,
      nombre:document.getElementById('nombre').value,
      domParticular:document.getElementById('domParticular').value,
      domEmpleo:document.getElementById('domEmpleo').value,
      pagoSemanal:document.getElementById('pagoSemanal').value,
      pagoQuincenal:document.getElementById('pagoQuincenal').value,
      horario:document.getElementById('horario').value,
      lugarCobro:document.getElementById('lugarCobro').value,
      enganche:document.getElementById('enganche').value,
      metodoPago:document.getElementById('metodoPago').value,
      tipoCobro:document.getElementById('tipoCobro').value,
      observaciones:document.getElementById('observaciones').value,
      cobrador:document.getElementById('cobradorVenta').value
    };
    ventas.push(venta);
    formVentaNuevo.reset();
    renderVentas();
    alert('‚úÖ Venta registrada correctamente.');
  });

  function renderVentas(){
    ventasUl.innerHTML='';
    ventas.forEach(v=>{
      const li=document.createElement('li');
      li.innerHTML=`<strong>${v.fecha}</strong> - ${v.nombre} (${v.articulos}) - $${v.precio} - ${v.cobrador}`;
      ventasUl.appendChild(li);
    });
  }

  imprimirTicket.addEventListener('click',()=>{
    if(ventas.length===0){alert('No hay ventas registradas');return;}
    const v=ventas[ventas.length-1];
    const ticket=`<h2 style="text-align:center;">üíº Ticket de Venta</h2>
      <p><strong>Fecha:</strong> ${v.fecha}</p>
      <p><strong>Cliente:</strong> ${v.nombre}</p>
      <p><strong>Art√≠culos:</strong> ${v.articulos}</p>
      <p><strong>Lugar de entrega:</strong> ${v.lugarEntrega}</p>
      <p><strong>Precio:</strong> $${v.precio}</p>
      <p><strong>Enganche:</strong> $${v.enganche}</p>
      <p><strong>M√©todo de pago:</strong> ${v.metodoPago}</p>
      <p><strong>Cobrador:</strong> ${v.cobrador}</p>
      <p><strong>Observaciones:</strong> ${v.observaciones}</p>`;
    const w=window.open('','', 'width=400,height=600');
    w.document.write(ticket);
    w.document.close();
    w.print();
  });
</script>
</body>
</html>
